#!/bin/bash

announce "Choose your style:"
echo 0. Classic
echo 1. Angular
announce -nn "Your choice:"
read -r STYLE

function classic {
    announce -nn "Choose your commit message:"
    read -r MSG

    git commit -m "$MSG"
}

function angular {
    announce "Choose the type:"
    echo "0. build      build system, dependencies"
    echo "1. ci         CI/CD"
    echo "2. docs       documentation changes (internal or public)"
    echo "3. feat       new features, backward-compatible"
    echo "4. fix        fix problems, backward-compatible"
    echo "5. perf       better performances, backward-compatible"
    echo "6. refactor   changes to the product, backward-compatible"
    echo "7. style      grammar, coding style, linting..."
    echo "8. test       new tests, refactoring tests..."
    echo "9. breaking   backward-incompatible changes"
    announce -nn "Your choice:"
    read -r CHOICE_TYPE

    case $CHOICE_TYPE in
    0|build)
        TYPE=build;;
    1|ci)
        TYPE=ci;;
    2|docs)
        TYPE=docs;;
    3|feat)
        TYPE=feat;;
    4|fix)
        TYPE=fix;;
    5|perf)
        TYPE=perf;;
    6|refactor)
        TYPE=refactor;;
    7|style)
        TYPE=style;;
    8|test)
        TYPE=test;;
    9|breaking)
        TYPE=breaking;;
    *)
        echo "Wrong input."
        angular;;
    esac

    announce -nn "Scope of the commit:"
    read -r SCOPE

    announce -nn "Commit message:"
    read -r MESSAGE

    git commit -m "$TYPE($SCOPE): $MESSAGE"
}

case $STYLE in
0|classic)
    classic
    ;;
1|angular)
    angular
    ;;
*)
    echo "Wrong input."
    exit 1;;
esac
